<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>reveal.js</title>
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides" id="slides">
			</div>
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>
			// Loads in arabic-test.json from the local directory
			var request = new XMLHttpRequest();
			request.open('GET','arabic-test.json');
			request.responseType = 'json';
			request.send();
			request.onload = function() {
			  var words = request.response;
			  populateWords(words);
			}
			
			// creates and populates sets of slides for each word
			function populateWords(jsonObj) {
				var wordArray = [];
				for (var i = 0; i < 10; i++) { // randomly selects 10 words from jsonObj
					var ind = randInt(0,jsonObj.length-1);
					wordArray.push(jsonObj[ind]);
					jsonObj.splice(ind,1);
				}
				var slidesDiv = document.getElementById('slides');
				for (var j = 0; j < wordArray.length; j++) { // loops through wordArray to make a parent section for each word
					var createSec = document.createElement('section');
					var testArray = [wordArray[j].eng,wordArray[j].arb,wordArray[j].prn]; // turns wordArray[j] into an array
					createSec.setAttribute('id','word'+j);
					slidesDiv.appendChild(createSec);
					var mainSec = document.getElementById('word'+j);
					for (var i = 0; i < testArray.length; i++) { // adds a child section for each item in testArray
						var createWord = document.createElement('h1');
						var createSubSec = document.createElement('section');
						createWord.textContent = testArray[i];
						createSubSec.appendChild(createWord);
						mainSec.appendChild(createSubSec);
					}
				}
			}

			function randInt(min, max) { // max and min are inclusive
			  min = Math.ceil(min);
			  max = Math.floor(max);
			  return Math.floor(Math.random() * (max - min + 1)) + min;
			}
			
			// Reveal.JS script starts here
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
